(window.webpackJsonp=window.webpackJsonp||[]).push([[29,5,8],{304:function(t,e,n){"use strict";var r=n(15),o=n(6),c=n(91),l=n(23),d=n(16),f=n(50),h=n(210),m=n(68),v=n(5),_=n(57),C=n(69).f,y=n(41).f,w=n(22).f,x=n(306).trim,A="Number",I=o.Number,k=I.prototype,O=f(_(k))==A,j=function(t){var e,n,r,o,c,l,d,code,f=m(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=x(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,r)}return+f};if(c(A,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var N,S=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof S&&(O?v((function(){k.valueOf.call(n)})):f(n)!=A)?h(new I(j(e)),n,S):j(e)},E=r?C(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;E.length>T;T++)d(I,N=E[T])&&!d(S,N)&&w(S,N,y(I,N));S.prototype=k,k.constructor=S,l(o,A,S)}},306:function(t,e,n){var r=n(26),o="["+n(307)+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(l,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},307:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},308:function(t,e,n){"use strict";var r=n(3),o=n(70).find,c=n(141),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c(l)},320:function(t,e,n){"use strict";n.r(e);n(304);var r={props:{product:{type:Object,required:!1,default:function(){return{}}},productId:{type:String,required:!0,default:function(){return""}},name:{type:String,required:!1,default:function(){return""}},sales:{type:String,required:!1,default:function(){return""}},price:{type:Number||String,required:!1,default:function(){return 0}},images:{type:Array,required:!1,default:function(){return[this.imagePlaceholder]}},endTime:{type:String,required:!1,default:function(){return null}}},data:function(){return{finish:!1}},computed:{},methods:{onCardClicked:function(){this.$emit("card-clicked",this.productId),this.$emit("click",this.productId)},imagePlaceholder:function(){return"/assets/img/image_placeholder.png"},daysLeft:function(){return new Date(this.endTime).getDay}}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-flat",[n("div",{staticClass:"wrapper flex w-full",on:{click:t.onCardClicked}},[n("div",{staticClass:"thumbnail relative flex-shrink-0 mr-4",staticStyle:{width:"48%"}},[n("div",{staticClass:"img-container-square w-full pt-10/10 relative"},[n("img",{staticClass:"absolute w-full h-full object-cover top-0 left-0 rounded-md",attrs:{src:t.images[0],alt:t.name}})])]),t._v(" "),n("div",{staticClass:"content relative flex-grow flex flex-col"},[n("div",{staticClass:"body mb-4"},[null!==t.endTime?n("div",{staticClass:"countdown flex items-center"},[n("span",{staticClass:"pt-1 mr-2 text-secondary-gray-400"},[n("i",{staticClass:"icon icon-clock"})]),t._v(" "),n("countdown",{staticClass:"flex-shrink-0",attrs:{"end-time":new Date(t.endTime)},on:{finish:function(e){t.finish=!0}},scopedSlots:t._u([{key:"process",fn:function(e){var r=e.timeObj;return n("span",{class:{"text-secondary-orange-600":r.leftTime<864e5}},[n("span",{directives:[{name:"show",rawName:"v-show",value:r.d>0,expression:"timeObj.d > 0"}],staticClass:"day"},[t._v(t._s(r.d)+" 天 ")]),t._v(t._s(r.h)+" 時 "+t._s(r.m)+" 分\n            ")])}}],null,!1,81395787)},[t._v(" "),n("span",{attrs:{slot:"finish"},slot:"finish"},[t._v("已截止")])])],1):t._e(),t._v(" "),n("div",{staticClass:"title text-lg font-bold mb-1"},[t._v(t._s(t.name))]),t._v(" "),n("div",{staticClass:"description text-sm line-clamp-2 max-h-10 h-auto w-full"},[t._v("\n          "+t._s(t.sales)+"\n        ")])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"price text-base font-bold text-secondary-money-600"},[t._v("\n          NT$"+t._s(t.price)+"\n        ")])])])])])}),[],!1,null,null,null);e.default=component.exports},322:function(t,e,n){"use strict";n.r(e);var r={props:{image:{type:String||Object,required:!0,default:function(){return"/assets/img/demo-photo.png"}},shadow:{type:Boolean,required:!1,default:!1}}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar relative"},[n("div",{staticClass:"wrapper p-1"},[n("div",{staticClass:"\n        outer-ring\n        absolute\n        top-5/10\n        left-5/10\n        transform\n        -translate-y-5/10 -translate-x-5/10\n        w-full\n        h-full\n        border-secondary-indigo-300 border-2\n        rounded-full\n      "}),t._v(" "),n("div",{staticClass:"\n        img-container\n        w-full\n        pt-10/10\n        rounded-full\n        overflow-hidden\n        relative\n      ",class:{"shadow-photo":t.shadow}},[n("img",{staticClass:"absolute top-0 left-0 w-full h-full object-cover",attrs:{src:t.image}})])])])}),[],!1,null,null,null);e.default=component.exports},359:function(t,e,n){"use strict";n.r(e);n(21),n(14),n(18),n(29),n(19),n(30);var r=n(7),o=(n(308),n(31));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={data:function(){return{pageTitle:"",activeTabIndex:0,fakeCategory:[{group_name:"本週強檔"},{group_name:"超熱賣"}],attentions:[],beloved:!1}},computed:l(l({},Object(o.d)("groups",["initiatorCurrent","groupsByInitiator"])),Object(o.d)("member",["memberAttentions","signinState"])),created:function(){this.fetchData()},mounted:function(){this.fetchAttentionData()},methods:l(l(l(l({},Object(o.b)("groups",["getGroupsByInitiator"])),Object(o.b)("member",["addMemberAttentions","getMemberAttentions","removeMemberAttention"])),Object(o.c)(["addAlertMessage","toggleShowAlert"])),{},{fetchData:function(){var t=this,e={initiatorId:this.$route.params.iid,sortCondition:this.activeTabIndex+1};this.getGroupsByInitiator(e).then((function(e){switch(!0){case"0000"===e.code:if(null===e.data.initiator)return void t.removeMemberAttention({attention_type:2,attention_id:t.$route.params.iid}).then((function(){t.$router.back(),t.$setAlert("該團主不存在")}));t.pageTitle=t.initiatorCurrent.nick_name+" 的團購店",t.$setNavbarNew(t.initiatorCurrent.nick_name,null,{icon:"icon-user-circle",url:"/member"},!0,!1);break;default:t.$setAlert("無法正確取得團主資訊")}})).catch((function(e){t.$setAlert(e)}))},fetchAttentionData:function(){var t=this;this.getMemberAttentions().then((function(e){switch(!0){case"0000"===e.code:t.attentions=e.data.find((function(t){return 2===t.attention_type})).attentions,t.filterBelovedInitiator()}}))},toggleActiveIndex:function(t){this.activeTabIndex=t,this.fetchData()},filterBelovedInitiator:function(){var t=this,e=this.attentions.find((function(e){return e.attention_id===t.$route.params.iid}));switch(!0){case null!=e:console.log(e),this.beloved=!0}},onHeartClicked:function(){var t=this;if(this.signinState)switch(console.log("start add/remove"),!0){case!0===this.beloved:this.removeMemberAttention({attention_type:2,attention_id:this.$route.params.iid}).then((function(e){"0000"===e.code&&(t.beloved=!1)})).catch((function(e){t.addAlertMessage(e),t.toggleShowAlert(!0)}));break;default:this.addMemberAttentions({attention_type:2,attention_id:this.$route.params.iid,nick_name:this.initiatorCurrent.nick_name,shop_name:this.initiatorCurrent.store_code||"011300",shop_address:"",picture:""!==this.initiatorCurrent.picture?this.initiatorCurrent.picture:"/assets/img/demo-photo.png"}).then((function(e){switch(!0){case"0000"===e.code:t.beloved=!0;break;default:t.addAlertMessage(e.message),t.toggleShowAlert(!0)}})).catch((function(e){t.addAlertMessage(e),t.toggleShowAlert(!0)}))}},onCardClicked:function(t){this.$router.push("/groups/"+t)}})},f=n(12),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"member-info flex flex-col items-center my-6 relative gap-4 mx-4"},[n("avatar",{staticClass:"w-20 h-20",attrs:{image:t.initiatorCurrent.picture?t.initiatorCurrent.picture:""}}),t._v(" "),n("div",{staticClass:"name text-lg text-secondary-gray-800 text-center font-medium",domProps:{innerHTML:t._s(t.initiatorCurrent.nick_name?t.initiatorCurrent.nick_name:"")}}),t._v(" "),n("div",{staticClass:"actions absolute top-0 right-0"},[n("div",{staticClass:"wrapper flex gap-2"},[n("v-button-oval",{on:{click:t.onHeartClicked}},[n("span",{staticClass:"text-xl",class:{"icon-heart":!t.beloved,"icon-heart_solid":t.beloved}})]),t._v(" "),n("v-button-oval",{},[n("span",{staticClass:"text-xl icon-share"})])],1)])],1),t._v(" "),n("section",{staticClass:"group-shelf-tabs px-4"},[n("div",{staticClass:"pt-4 tabs flex gap-2 mb-base"},t._l(t.fakeCategory,(function(e,r){return n("v-pill",{key:r,staticClass:"tab",attrs:{variant:{active:r===t.activeTabIndex}},on:{click:function(e){return t.toggleActiveIndex(r)}}},[t._v("\n        "+t._s(e.group_name)+"\n      ")])})),1)]),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.groupsByInitiator.length>0,expression:"groupsByInitiator.length > 0"}],staticClass:"group-shelf-products px-4"},[n("div",{staticClass:"list laptop:grid laptop:grid-cols-2 desktop:grid-cols-3 gap-2"},t._l(t.groupsByInitiator?t.groupsByInitiator:[],(function(e,r){return n("group-card",{key:r,attrs:{name:e.product_name,"product-id":e.product_id,sales:e.sales_focus,price:e.price,images:e.pic_list,"end-time":e.group_end_time},on:{click:t.onCardClicked}})})),1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Avatar:n(322).default,GroupCard:n(320).default})}}]);