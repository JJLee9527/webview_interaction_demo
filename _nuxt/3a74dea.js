(window.webpackJsonp=window.webpackJsonp||[]).push([[25,11,12],{304:function(t,e,n){"use strict";var r=n(15),o=n(6),c=n(91),l=n(23),d=n(16),f=n(50),v=n(210),m=n(68),h=n(5),_=n(57),w=n(69).f,x=n(41).f,C=n(22).f,y=n(306).trim,O="Number",k=o.Number,N=k.prototype,j=f(_(N))==O,S=function(t){var e,n,r,o,c,l,d,code,f=m(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=y(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,r)}return+f};if(c(O,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var A,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(j?h((function(){N.valueOf.call(n)})):f(n)!=O)?v(new k(S(e)),n,I):S(e)},E=r?w(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),$=0;E.length>$;$++)d(k,A=E[$])&&!d(I,A)&&C(I,A,x(k,A));I.prototype=N,N.constructor=I,l(o,O,I)}},306:function(t,e,n){var r=n(26),o="["+n(307)+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(l,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},307:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},312:function(t,e,n){var content=n(319);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("090c0fef",content,!0,{sourceMap:!1})},318:function(t,e,n){"use strict";n(312)},319:function(t,e,n){var r=n(47)((function(i){return i[1]}));r.push([t.i,".swiper-container{\n  overflow:hidden\n}\n.swiper-pagination-bullet{\n  height:0.25rem;\n  width:1rem;\n  border-radius:0.125rem;\n  background-color:var(--secondary---indigo10);\n  opacity:0.8\n}\n.swiper-pagination-bullet-active{\n  background-color:var(--secondary---indigo80)\n}",""]),r.locals={},t.exports=r},323:function(t,e,n){"use strict";n.r(e);var r={props:{images:{type:Array,required:!0,default:function(){return[]}},pagination:{type:Boolean,required:!1,default:!1}},data:function(){return{imageSwiperOptions:{loop:!0,slidesPerView:1,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(t,e){return"<span class="+e+"></span>"}}}}},computed:{imageSwiper:function(){return this.$refs.imageSwiper.$swiper}}},o=(n(318),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative"},[n("swiper",{ref:"imageSwiper",attrs:{options:t.imageSwiperOptions}},[t._l(t.images,(function(image,t){return n("swiper-slide",{key:t},[n("div",{staticClass:"img-container w-full pt-10/10 relative"},[n("img",{staticClass:"absolute top-0 left-0 w-full h-full object-contain",attrs:{src:image,alt:""}})])])})),t._v(" "),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)}),[],!1,null,null,null);e.default=component.exports},324:function(t,e,n){"use strict";n.r(e);n(304);var r={props:{storeName:{type:String,required:!1,default:function(){return"未知門市"}},storeCode:{type:String,required:!1,default:function(){return"0000"}},bundleCondition:{type:Number,required:!0,default:function(){return 0}},bundleAmountLeft:{type:Number,required:!0,default:function(){return 0}},bundleEndTime:{type:String,required:!0,default:""},name:{type:String,required:!1,default:function(){return"團爸媽"}},sales:{type:String||XMLDocument,required:!1,default:function(){return""}},showButton:{type:Boolean,required:!1,default:!1},photo:{type:String||Object,required:!1,default:function(){return null}},follow:{type:Boolean,required:!1,default:!1}},data:function(){return{finish:!1}},computed:{},mounted:function(){},methods:{onButtonClicked:function(){this.$emit("click")},onFinished:function(){this.finish=!0,this.$emit("finish",!0)}}},o=n(12),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card-flat",[n("div",{staticClass:"wrapper flex gap-4 items-start"},[n("div",{staticClass:"initiator flex flex-col items-center gap-2 px-2"},[n("div",{staticClass:"photo relative"},[n("div",{staticClass:"\n            img-container\n            w-14\n            h-14\n            relative\n            rounded-full\n            overflow-hidden\n          "},[n("img",{staticClass:"absolute top-0 left-0 w-full h-full object-cover",attrs:{src:null!==t.photo?t.photo:"/assets/img/demo-photo.png",alt:""}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.follow,expression:"follow"}],staticClass:"\n            w-4\n            h-4\n            bg-white\n            rounded-2xl\n            shadow-lv1\n            absolute\n            right-0\n            bottom-0\n            flex\n            justify-center\n            items-center\n          "},[n("svg",{attrs:{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M1.39273 3.24079C1.48696 3.01331 1.62507 2.80661 1.79918 2.6325C1.97329 2.45838 2.17999 2.32027 2.40748 2.22604C2.63497 2.13181 2.87879 2.08331 3.12502 2.08331C3.37125 2.08331 3.61507 2.13181 3.84255 2.22604C4.07004 2.32027 4.27674 2.45838 4.45085 2.6325L5.00002 3.18166L5.54918 2.6325C5.90082 2.28086 6.37773 2.08332 6.87502 2.08332C7.3723 2.08332 7.84922 2.28086 8.20085 2.6325C8.55248 2.98413 8.75003 3.46105 8.75003 3.95833C8.75003 4.45561 8.55248 4.93253 8.20085 5.28416L5.00002 8.48499L1.79918 5.28416C1.62507 5.11005 1.48696 4.90335 1.39273 4.67587C1.2985 4.44838 1.25 4.20456 1.25 3.95833C1.25 3.7121 1.2985 3.46828 1.39273 3.24079Z",fill:"#28379B",stroke:"#28379B","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])])]),t._v(" "),n("div",{staticClass:"\n          name\n          text-sm text-secondary-gray-500 text-center\n          whitespace-pre-line\n        "},[t._v("\n        "+t._s(t.name)+"\n      ")])]),t._v(" "),n("div",{staticClass:"content flex flex-col gap-2 flex-grow"},[n("div",{staticClass:"head flex items-center justify-between text-sm"},[n("div",{staticClass:"store text-secondary-indigo-800"},[t._v("\n          "+t._s(t.storeCode)+" "+t._s(t.storeName)+"\n        ")]),t._v(" "),""!==t.bundleEndTime?n("div",{staticClass:"count-down flex items-center justify-between gap-2"},[n("i",{staticClass:"text-secondary-gray-800 icon-clock text-lg"}),t._v(" "),n("countdown",{staticClass:"flex-shrink-0",attrs:{"end-time":new Date(t.bundleEndTime)},on:{finish:function(e){return t.onFinished()}},scopedSlots:t._u([{key:"process",fn:function(e){var r=e.timeObj;return n("span",{},[n("span",{directives:[{name:"show",rawName:"v-show",value:r.d>0,expression:"timeObj.d > 0"}],staticClass:"day"},[t._v(t._s(r.d)+" 天 ")]),t._v(t._s(r.h)+" 時 "+t._s(r.m)+" 分\n            ")])}}],null,!1,2468349450)},[t._v(" "),n("span",{attrs:{slot:"finish"},slot:"finish"},[t._v("已截止")])])],1):t._e()]),t._v(" "),n("div",{staticClass:"body"},[n("div",{staticClass:"sales text-secondary-500 text-sm whitespace-pre-line"},[t._v("\n          "+t._s(t.sales)+"\n        ")])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"\n            wrapper\n            flex\n            items-center\n            justify-between\n            gap-4\n            text-secondary-gray-500 text-sm\n          "},[n("div",{staticClass:"info"},[t._v("\n            "+t._s(t.bundleCondition)+" 份開團，離滿團尚有"),n("span",{staticClass:"text-secondary-orange-600 mx-1"},[t._v(t._s(t.bundleAmountLeft))]),t._v("份\n          ")]),t._v(" "),n("v-button",{directives:[{name:"show",rawName:"v-show",value:!t.finish&&t.showButton,expression:"!finish && showButton"}],staticClass:"\n              bg-gradient-to-r\n              from-gradient-blue-start\n              to-gradient-blue-end\n              text-xs text-white\n              border border-secondary-indigo-500\n              h-8\n              px-4\n              flex-shrink-0\n              rounded-md\n            ",on:{click:t.onButtonClicked}},[t._v("立即參與")])],1)])])])])}),[],!1,null,null,null);e.default=component.exports},331:function(t,e,n){var content=n(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("020b2e12",content,!0,{sourceMap:!1})},342:function(t,e,n){"use strict";n(331)},343:function(t,e,n){var r=n(47)((function(i){return i[1]}));r.push([t.i,"#tooltip{\n  display:none\n}\n#tooltip[data-show]{\n  display:block\n}",""]),r.locals={},t.exports=r},365:function(t,e,n){"use strict";n.r(e);n(21),n(14),n(18),n(29),n(19),n(30);var r=n(11),o=n(7),c=(n(304),n(58),n(31));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={data:function(){return{pxgroupMember:!1,showToast:!1,selectedAmount:0,buyAmount:0,bundleAmountLeft:6,actionSheetFixed:!0,sharedLink:"",initiator:{},product:{},dataFetchCount:0,pageTitle:""}},computed:d(d(d(d({},Object(c.d)("groups",["orderCurrent","productOrderCurrent"])),Object(c.d)("orders",["orderNumber"])),Object(c.d)("member",["signinState"])),{},{totalPrice:function(){return this.product.price*this.buyAmount}}),created:function(){this.fetchData()},mounted:function(){},methods:d(d(d({},Object(c.b)("groups",["getProductInfo"])),Object(c.b)("orders",["createOrder"])),{},{fetchData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={productId:t.$route.params.gid,groupId:t.$route.params.groupId},e.next=3,t.getProductInfo(n);case 3:if(null!==t.productOrderCurrent&&void 0!==t.productOrderCurrent){e.next=8;break}return t.dataFetchCount++,t.dataFetchCount>5&&t.$router.push("/groups"),t.fetchData(),e.abrupt("return");case 8:t.product=t.productOrderCurrent,t.initiator=t.productOrderCurrent.initiator_info,t.$setNavbarNew(t.product.product_name);case 11:case"end":return e.stop()}}),e)})))()},onSubmitted:function(){switch(!0){case!0!==this.signinState:return void this.$setAlert("您目前尚未登入，請登入後再回來喔!")}switch(!0){case this.buyAmount<=0||this.buyAmount>this.initiator.remain_quantity:return void this.$setAlert("您選的數量超出了範圍，請點擊加號或減號調整數量")}this.placeOrder()},shareLink:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sharedLink=window.location,e.prev=1,e.next=4,navigator.share(t.sharedLink);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("您不在安全環境中，故無法使用分享功能");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},placeOrder:function(){var t=this,data={groupId:Number(this.$route.params.groupId),quantity:this.buyAmount};return this.createOrder(data).then((function(e){switch(!0){case"0000"===e.code:localStorage.setItem("pxec.groupbuying.product.current",JSON.stringify(t.product)),localStorage.setItem("pxec.groupbuying.order.cachedOrderNumber",JSON.stringify(e.data)),t.$router.push("/groups/"+t.$route.params.gid+"/confirm");break;case"0000"!==e.code:console.log(e)}}))},onFinished:function(t){this.$setAlert("商品已過期，將無法成功開單")}})},v=(n(342),n(12)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper px-4"},[n("section",{staticClass:"initiator-info px-4"},[n("parts-initiator-card",{attrs:{name:t.initiator.nick_name,photo:t.initiator.picture,sales:t.product.sales_focus,"store-name":t.initiator.store_name,"store-code":t.initiator.store_code,"bundle-end-time":t.initiator.group_end_time,"bundle-amount-left":t.initiator.remain_quantity,"bundle-condition":t.initiator.quantity_condition,"show-button":!1},on:{click:function(e){return t.onParticipateClicked(t.initiator)},finish:function(e){return t.onFinished()}}})],1),t._v(" "),n("parts-image-swiper",{staticClass:"w-full",attrs:{images:t.product.pic_list}}),t._v(" "),n("section",{staticClass:"info px-4 my-6 flex flex-col gap-2"},[n("div",{staticClass:"title font-bold text-2xl mb-2"},[t._v("\n      "+t._s(t.product.product_name||"...")+"\n    ")]),t._v(" "),n("div",{staticClass:"session mb-2"},[t._v("\n      團購檔期: "+t._s(t._f("dateYMD")(t.product.sales_start_time))+" -\n      "+t._s(t._f("dateYMD")(t.product.sales_end_time))+"\n    ")]),t._v(" "),n("div",{staticClass:"feature text-sm text-secondary-gray-500 mb-2 whitespace-pre-line"},[t._v("\n      "+t._s(t.product.sales_focus)+"\n    ")]),t._v(" "),n("div",{staticClass:"price-and-limitation flex items-center gap-6 mb-2"},[n("div",{staticClass:"price flex items-center gap-1"},[n("div",{staticClass:"ori-price line-through font-medium text-secondary-gray-500"},[t._v("\n          NT$ "+t._s(t.product.original_price||0)+"\n        ")]),t._v(" "),n("div",{staticClass:"new-price font-bold text-secondary-money-600 text-lg"},[t._v("\n          NT$ "+t._s(t.product.price||0)+"\n        ")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.product.quantity_limit,expression:"product.quantity_limit !== 0"}],staticClass:"limitation"},[n("div",{staticClass:"\n            badge\n            h-8\n            text-secondary-orange-600\n            border\n            rounded-full\n            border-secondary-orange-600\n            flex\n            items-center\n            justify-center\n            px-4\n          "},[t._v("\n          每人限買 "+t._s(t.product.quantity_limit)+" 份\n        ")])])]),t._v(" "),n("div",{staticClass:"services flex text-secondary-gray-500"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.product.store_pickup,expression:"product.store_pickup"}],staticClass:"to-store flex items-center mr-4"},[n("i",{staticClass:"icon icon-shopping-bag text-2xl mr-1"}),t._v(" "),n("div",[t._v("到店取貨")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.product.logistics,expression:"product.logistics"}],staticClass:"to-home flex items-center"},[n("i",{staticClass:"icon icon-truck text-2xl mr-1"}),t._v(" "),n("div",[t._v("宅配到府")])])])]),t._v(" "),n("section",{staticClass:"group-detail px-4 my-6 flex flex-col gap-6"},[n("div",{staticClass:"sale-features"},[n("div",{staticClass:"specs-title text-xl font-bold"},[t._v("商品特色")]),t._v(" "),n("div",{staticClass:"sale tracking-wider whitespace-pre-line"},[t._v("\n        "+t._s(t.product.features)+"\n      ")])]),t._v(" "),n("div",{staticClass:"sale-description"},[n("div",{staticClass:"specs-title text-xl font-bold"},[t._v("詳細說明")]),t._v(" "),n("div",{staticClass:"sale tracking-wider whitespace-pre-line"},[t._v("\n        "+t._s(t.product.others)+"\n      ")])])]),t._v(" "),n("div",{staticClass:"alert fixed z-50 bottom-12 w-full px-4",class:{hidden:!t.showToast}},[n("v-toast",{attrs:{show:"",dismissible:!0},on:{hidden:function(e){t.showToast=!1}}},[t._v("未登入圈團會員，建議先前往登入PXpay會員再回來")])],1),t._v(" "),n("div",{staticClass:"placeholder w-full h-48"}),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.actionSheetFixed,expression:"actionSheetFixed"}],staticClass:"\n      action-sheet-fixed\n      px-4\n      py-6\n      fixed\n      bottom-0\n      left-0\n      right-0\n      shadow-panel\n      bg-white\n      z-20\n    "},[n("div",{staticClass:"wrapper flex flex-col gap-6"},[n("div",{staticClass:"body flex flex-col gap-2"},[n("div",{staticClass:"row flex justify-between"},[n("div",{staticClass:"title"},[t._v("一份 "+t._s(t.product.pieces)+" 入")]),t._v(" "),n("div",{staticClass:"control justify-self-end flex items-center gap-2"},[n("v-button-oval",{staticClass:"decrease",attrs:{disabled:!t.buyAmount>0,variant:"small"},on:{click:function(e){t.buyAmount--}}},[n("i",{staticClass:"icon icon-minus text-2xl"})]),t._v(" "),n("v-input",{staticClass:"w-10 font-medium",attrs:{variant:"transparent",max:t.product.inventory_quantity,min:"0"},model:{value:t.buyAmount,callback:function(e){t.buyAmount=e},expression:"buyAmount"}}),t._v(" "),n("v-button-oval",{staticClass:"increment",attrs:{disabled:t.buyAmount>=t.product.inventory_quantity,variant:"small"},on:{click:function(e){t.buyAmount++}}},[n("i",{staticClass:"icon icon-plus text-2xl"})])],1)]),t._v(" "),n("div",{staticClass:"row flex justify-between"},[n("div",{staticClass:"title"},[t._v("總金額")]),t._v(" "),n("div",{staticClass:"justify-self-end text-secondary-money-600 font-bold"},[t._v("\n            $ "+t._s(t.totalPrice)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"footer"},[n("v-button-md",{staticClass:"w-full",attrs:{disabled:t.buyAmount<=0},on:{click:t.onSubmitted}},[t._v("確認配送資料")])],1)])]),t._v(" "),n("v-toast",{staticClass:"fixed z-50 top-0 left-0"},[t._v("123")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PartsInitiatorCard:n(324).default,PartsImageSwiper:n(323).default})}}]);